<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shorts Reminder - GearDriven</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #0f0f0f;
      color: #f0f0f0;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
    }
    .hidden { display: none; }

    .login-box, .main-box {
      background: #1a1a1a;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 20px #0f0;
      text-align: center;
      animation: fadeIn 1s ease;
    }

    input {
      padding: 10px;
      margin: 10px;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
      width: 80%;
    }

    button {
      background: #00ff88;
      border: none;
      padding: 10px 20px;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
      color: black;
      margin-top: 10px;
    }

    #loading {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      animation: spinIn 1s ease;
    }

    .spinner {
      border: 5px solid #444;
      border-top: 5px solid #00ff88;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1.2s linear infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes spinIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    #status {
      margin-top: 15px;
      font-size: 1.1rem;
    }

    a {
      color: #00ff88;
    }
  </style>
</head>
<body>

<div class="login-box" id="loginBox">
  <h2>üîê Login to Post Reminder</h2>
  <input type="text" id="username" placeholder="Username" />
  <input type="password" id="password" placeholder="Password" />
  <button onclick="login()">Login</button>
</div>

<div id="loading" class="hidden">
  <div class="spinner">üöó</div>
  <p style="margin-top: 10px;">Loading Dashboard...</p>
</div>

<div class="main-box hidden" id="mainBox">
  <h2>üì¢ Daily YouTube Short Reminder</h2>
  <input type="text" id="shortLink" placeholder="Paste your YouTube Shorts link..." />
  <button onclick="checkShort()">Submit</button>
  <div id="status"></div>
</div>

<script>
  const expectedChannel = "realgeardriven";

  function login() {
    const u = document.getElementById("username").value.trim();
    const p = document.getElementById("password").value.trim();
    if (u === "MoneyGuy7" && p === "1234") {
      document.getElementById("loginBox").classList.add("hidden");
      document.getElementById("loading").classList.remove("hidden");
      setTimeout(() => {
        document.getElementById("loading").classList.add("hidden");
        document.getElementById("mainBox").classList.remove("hidden");
      }, 2000);
    } else {
      alert("‚ùå Incorrect login.");
    }
  }

  function checkShort() {
    const input = document.getElementById("shortLink").value.trim();
    const match = input.match(/(?:\/shorts\/|v=)([\w\-]+)/);
    const status = document.getElementById("status");

    if (!match) {
      status.innerText = "‚ùå Invalid YouTube Shorts link.";
      return;
    }

    const videoId = match[1];
    const apiUrl = `https://noembed.com/embed?url=https://www.youtube.com/watch?v=${videoId}`;

    fetch(apiUrl)
      .then(res => res.json())
      .then(data => {
        if (data.error) {
          status.innerText = "‚ùå Could not verify the video.";
          return;
        }

        const actualAuthor = data.author_name.replace(/[@\s]/g, '').toLowerCase();
        const expected = expectedChannel.replace(/[@\s]/g, '').toLowerCase();

        if (actualAuthor.includes(expected)) {
          const today = new Date().toLocaleDateString();
          localStorage.setItem("lastPostDate", today);
          status.innerHTML = "‚úÖ Video accepted! You‚Äôre done for today.";
        } else {
          status.innerHTML = `‚ùå That video is not from <strong>@${expectedChannel}</strong>`;
        }
      })
      .catch(() => {
        status.innerText = "‚ùå Error checking video.";
      });
  }

  // Optional daily reminder logic
  window.onload = () => {
    const last = localStorage.getItem("lastPostDate");
    const today = new Date().toLocaleDateString();
    if (last === today) {
      document.getElementById("status").innerText = "‚úÖ You‚Äôve already posted today!";
    }
  };
</script>

</body>
</html>
